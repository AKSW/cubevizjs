/*!
 * yqlQuery v1.0.0
 * http://github.com/terrasoftlabs/jquery-yqlquery
 *
 * Copyright Â© 2012 Gabriel Nahmias.
 * Free to use under the MIT license.
 * http://www.opensource.org/licenses/mit-license.php
 *
 */

(function(N){var I;if(I==null){I={};}I.setProperties=function d(ae,af){if(ae!=null&&af!=null){for(var e in af){ae[e]=af[e];}}return ae;};I.setProperties(I,{percentEncode:function X(e){if(e==null){return"";}if(e instanceof Array){var af="";for(var ae=0;ae<e.length;++e){if(af!=""){af+="&";}af+=I.percentEncode(e[ae]);}return af;}e=encodeURIComponent(e);e=e.replace(/\!/g,"%21");e=e.replace(/\*/g,"%2A");e=e.replace(/\'/g,"%27");e=e.replace(/\(/g,"%28");e=e.replace(/\)/g,"%29");return e;},decodePercent:function k(e){if(e!=null){e=e.replace(/\+/g," ");}return decodeURIComponent(e);},getParameterList:function D(ae){if(ae==null){return[];}if(typeof ae!="object"){return I.decodeForm(ae+"");}if(ae instanceof Array){return ae;}var e=[];for(var af in ae){e.push([af,ae[af]]);}return e;},getParameterMap:function E(e){if(e==null){return{};}if(typeof e!="object"){return I.getParameterMap(I.decodeForm(e+""));}if(e instanceof Array){var af={};for(var ag=0;ag<e.length;++ag){var ae=e[ag][0];if(af[ae]===undefined){af[ae]=e[ag][1];}}return af;}return e;},getParameter:function V(e,ae){if(e instanceof Array){for(var af=0;af<e.length;++af){if(e[af][0]==ae){return e[af][1];}}}else{return I.getParameterMap(e)[ae];}return null;},formEncode:function l(e){var ae="";var ag=I.getParameterList(e);for(var af=0;af<ag.length;++af){var ah=ag[af][1];if(ah==null){ah="";}if(ae!=""){ae+="&";}ae+=I.percentEncode(ag[af][0])+"="+I.percentEncode(ah);}return ae;},decodeForm:function r(aj){var ah=[];var af=aj.split("&");for(var ag=0;ag<af.length;++ag){var ae=af[ag];if(ae==""){continue;}var ak=ae.indexOf("=");var e;var ai;if(ak<0){e=I.decodePercent(ae);ai=null;}else{e=I.decodePercent(ae.substring(0,ak));ai=I.decodePercent(ae.substring(ak+1));}ah.push([e,ai]);}return ah;},setParameter:function i(ah,ae,ag){var e=ah.parameters;if(e instanceof Array){for(var af=0;af<e.length;++af){if(e[af][0]==ae){if(ag===undefined){e.splice(af,1);}else{e[af][1]=ag;ag=undefined;}}}if(ag!==undefined){e.push([ae,ag]);}}else{e=I.getParameterMap(e);e[ae]=ag;ah.parameters=e;}},setParameters:function ab(ag,e){var af=I.getParameterList(e);for(var ae=0;ae<af.length;++ae){I.setParameter(ag,af[ae][0],af[ae][1]);}},completeRequest:function U(e,ae){if(e.method==null){e.method="GET";}var af=I.getParameterMap(e.parameters);if(af.oauth_consumer_key==null){I.setParameter(e,"oauth_consumer_key",ae.consumerKey||"");}if(af.oauth_token==null&&ae.token!=null){I.setParameter(e,"oauth_token",ae.token);}if(af.oauth_version==null){I.setParameter(e,"oauth_version","1.0");}if(af.oauth_timestamp==null){I.setParameter(e,"oauth_timestamp",I.timestamp());}if(af.oauth_nonce==null){I.setParameter(e,"oauth_nonce",I.nonce(6));}I.SignatureMethod.sign(e,ae);},setTimestampAndNonce:function R(e){I.setParameter(e,"oauth_timestamp",I.timestamp());I.setParameter(e,"oauth_nonce",I.nonce(6));},addToURL:function Q(ae,ag){newURL=ae;if(ag!=null){var e=I.formEncode(ag);if(e.length>0){var af=ae.indexOf("?");if(af<0){newURL+="?";}else{newURL+="&";}newURL+=e;}}return newURL;},getAuthorizationHeader:function M(ae,aj){var af='OAuth realm="'+I.percentEncode(ae)+'"';var ai=I.getParameterList(aj);for(var ah=0;ah<ai.length;++ah){var ag=ai[ah];var e=ag[0];if(e.indexOf("oauth_")==0){af+=","+I.percentEncode(e)+'="'+I.percentEncode(ag[1])+'"';}}return af;},correctTimestampFromSrc:function Z(e){e=e||"oauth_timestamp";var ae=document.getElementsByTagName("script");if(ae==null||!ae.length){return;}var af=ae[ae.length-1].src;if(!af){return;}var ag=af.indexOf("?");if(ag<0){return;}parameters=I.getParameterMap(I.decodeForm(af.substring(ag+1)));var ah=parameters[e];if(ah==null){return;}I.correctTimestamp(ah);},correctTimestamp:function w(e){I.timeCorrectionMsec=(e*1000)-(new Date()).getTime();},timeCorrectionMsec:0,timestamp:function j(){var e=(new Date()).getTime()+I.timeCorrectionMsec;return Math.floor(e/1000);},nonce:function s(af){var ag=I.nonce.CHARS;var ae="";for(var ah=0;ah<af;++ah){var e=Math.floor(Math.random()*ag.length);ae+=ag.substring(e,e+1);}return ae;}});I.nonce.CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz";I.declareClass=function K(ag,ae,ah){var af=ag[ae];ag[ae]=ah;if(ah!=null&&af!=null){for(var e in af){if(e!="prototype"){ah[e]=af[e];}}}return ah;};I.declareClass(I,"SignatureMethod",function b(){});I.setProperties(I.SignatureMethod.prototype,{sign:function n(af){var e=I.SignatureMethod.getBaseString(af);var ae=this.getSignature(e);I.setParameter(af,"oauth_signature",ae);return ae;},initialize:function g(af,ae){var e;if(ae.accessorSecret!=null&&af.length>9&&af.substring(af.length-9)=="-Accessor"){e=ae.accessorSecret;}else{e=ae.consumerSecret;}this.key=I.percentEncode(e)+"&"+I.percentEncode(ae.tokenSecret);}});I.setProperties(I.SignatureMethod,{sign:function n(af,ae){var e=I.getParameterMap(af.parameters).oauth_signature_method;if(e==null||e==""){e="HMAC-SHA1";I.setParameter(af,"oauth_signature_method",e);}I.SignatureMethod.newMethod(e,ae).sign(af);},newMethod:function A(ai,ae){var aj=I.SignatureMethod.REGISTERED[ai];if(aj!=null){var af=new aj();af.initialize(ai,ae);return af;}var ag=new Error("signature_method_rejected");var e="";for(var ah in I.SignatureMethod.REGISTERED){if(e!=""){e+="&";}e+=I.percentEncode(ah);}ag.oauth_acceptable_signature_methods=e;throw ag;},REGISTERED:{},registerMethodClass:function t(e,ae){for(var af=0;af<e.length;++af){I.SignatureMethod.REGISTERED[e[af]]=ae;}},makeSubclass:function ad(ae){var e=I.SignatureMethod;var af=function(){e.call(this);};af.prototype=new e();af.prototype.getSignature=ae;af.prototype.constructor=af;return af;},getBaseString:function o(af){var e=af.action;var ae=e.indexOf("?");var ag;if(ae<0){ag=af.parameters;}else{ag=I.decodeForm(e.substring(ae+1));var ah=I.getParameterList(af.parameters);for(var ai=0;ai<ah.length;++ai){ag.push(ah[ai]);}}return I.percentEncode(af.method.toUpperCase())+"&"+I.percentEncode(I.SignatureMethod.normalizeUrl(e))+"&"+I.percentEncode(I.SignatureMethod.normalizeParameters(ag));},normalizeUrl:function Y(aj){var ai=I.SignatureMethod.parseUri(aj);var ae=ai.protocol.toLowerCase();var ag=ai.authority.toLowerCase();var af=(ae=="http"&&ai.port==80)||(ae=="https"&&ai.port==443);if(af){var e=ag.lastIndexOf(":");if(e>=0){ag=ag.substring(0,e);}}var ah=ai.path;if(!ah){ah="/";}return ae+"://"+ag+ah;},parseUri:function T(af){var ag={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@\/]*):?([^:@\/]*))?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/}};var ae=ag.parser.strict.exec(af);var ah={};var e=14;while(e--){ah[ag.key[e]]=ae[e]||"";}return ah;},normalizeParameters:function C(ai){if(ai==null){return"";}var ah=I.getParameterList(ai);var af=[];for(var ag=0;ag<ah.length;++ag){var e=ah[ag];if(e[0]!="oauth_signature"){af.push([I.percentEncode(e[0])+" "+I.percentEncode(e[1]),e]);}}af.sort(function(ak,al){if(ak[0]<al[0]){return -1;}if(ak[0]>al[0]){return 1;}return 0;});var ae=[];for(var aj=0;aj<af.length;++aj){ae.push(af[aj][1]);}return I.formEncode(ae);}});I.SignatureMethod.registerMethodClass(["PLAINTEXT","PLAINTEXT-Accessor"],I.SignatureMethod.makeSubclass(function G(e){return this.key;}));I.SignatureMethod.registerMethodClass(["HMAC-SHA1","HMAC-SHA1-Accessor"],I.SignatureMethod.makeSubclass(function G(e){B="=";var ae=x(this.key,e);return ae;}));try{I.correctTimestampFromSrc();}catch(ac){}var u=0;var B="";var L=8;function q(e){return h(m(J(e),e.length*L));}function P(e){return aa(m(J(e),e.length*L));}function f(e){return c(m(J(e),e.length*L));}function O(e,ae){return h(z(e,ae));}function x(e,ae){return aa(z(e,ae));}function W(e,ae){return c(z(e,ae));}function H(){return q("abc")=="a9993e364706816aba3e25717850c26c9cd0d89d";}function m(ar,al){ar[al>>5]|=128<<(24-al%32);ar[((al+64>>9)<<4)+15]=al;var at=Array(80);var aq=1732584193;var ap=-271733879;var ao=-1732584194;var an=271733878;var am=-1009589776;for(var ai=0;ai<ar.length;ai+=16){var ak=aq;var aj=ap;var ah=ao;var ag=an;var ae=am;for(var af=0;af<80;af++){if(af<16){at[af]=ar[ai+af];}else{at[af]=y(at[af-3]^at[af-8]^at[af-14]^at[af-16],1);}var au=p(p(y(aq,5),a(af,ap,ao,an)),p(p(am,at[af]),v(af)));am=an;an=ao;ao=y(ap,30);ap=aq;aq=au;}aq=p(aq,ak);ap=p(ap,aj);ao=p(ao,ah);an=p(an,ag);am=p(am,ae);}return Array(aq,ap,ao,an,am);}function a(ae,e,ag,af){if(ae<20){return(e&ag)|((~e)&af);}if(ae<40){return e^ag^af;}if(ae<60){return(e&ag)|(e&af)|(ag&af);}return e^ag^af;}function v(e){return(e<20)?1518500249:(e<40)?1859775393:(e<60)?-1894007588:-899497514;}function z(af,ai){var ah=J(af);if(ah.length>16){ah=m(ah,af.length*L);}var e=Array(16),ag=Array(16);for(var ae=0;ae<16;ae++){e[ae]=ah[ae]^909522486;ag[ae]=ah[ae]^1549556828;}var aj=m(e.concat(J(ai)),512+ai.length*L);return m(ag.concat(aj),512+160);}function p(e,ag){var af=(e&65535)+(ag&65535);var ae=(e>>16)+(ag>>16)+(af>>16);return(ae<<16)|(af&65535);}function y(e,ae){return(e<<ae)|(e>>>(32-ae));}function J(ag){var af=Array();var e=(1<<L)-1;for(var ae=0;ae<ag.length*L;ae+=L){af[ae>>5]|=(ag.charCodeAt(ae/L)&e)<<(32-L-ae%32);}return af;}function c(af){var ag="";var e=(1<<L)-1;for(var ae=0;ae<af.length*32;ae+=L){ag+=String.fromCharCode((af[ae>>5]>>>(32-L-ae%32))&e);}return ag;}function h(af){var ae=u?"0123456789ABCDEF":"0123456789abcdef";var ag="";for(var e=0;e<af.length*4;e++){ag+=ae.charAt((af[e>>2]>>((3-e%4)*8+4))&15)+ae.charAt((af[e>>2]>>((3-e%4)*8))&15);}return ag;}function aa(ag){var af="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";var ai="";for(var ae=0;ae<ag.length*4;ae+=3){var ah=(((ag[ae>>2]>>8*(3-ae%4))&255)<<16)|(((ag[ae+1>>2]>>8*(3-(ae+1)%4))&255)<<8)|((ag[ae+2>>2]>>8*(3-(ae+2)%4))&255);for(var e=0;e<4;e++){if(ae*8+e*6>ag.length*32){ai+=B;}else{ai+=af.charAt((ah>>6*(3-e))&63);}}}return ai;}var F="$.yql: ";var S={getHTML:function(e){var ae=e.url;e.query="select * from html where url='"+ae+"'";N.yql(e);},OAuthURL:function(ai,ap,aq){var e={consumerSecret:ap,tokenSecret:""};var an={action:aq,method:"GET",parameters:[["oauth_version","1.0"],["oauth_consumer_key",ai]]};I.setTimestampAndNonce(an);I.SignatureMethod.sign(an,e);var al=I.getParameterMap(an);var aj=I.decodeForm(I.SignatureMethod.getBaseString(an));var ae="";if(al.parameters){for(var am in al.parameters){for(var af in al.parameters[am]){if(al.parameters[am][af]=="oauth_signature"){ae=al.parameters[am][1];break;}}}}var ag=aj[2][0].split("&");ag.push("oauth_signature="+encodeURIComponent(ae));ag.sort(function(at,ar){if(at[0]<ar[0]){return -1;}if(at[0]>ar[0]){return 1;}if(at[1]<ar[1]){return -1;}if(at[1]>ar[1]){return 1;}return 0;});var ak="";for(var ao in ag){ak+=ag[ao]+"&";}var ah=aj[1][0]+"?"+ak.slice(0,ak.length-1);return ah;},query:function(af){var ah=N.extend({format:"json"},af);var ae=ah.format;var ai=ah.query;var e=S.yqlURL({query:ah.query,format:ae});var ag;if(ah.key&&ah.secret){ag=S.OAuthURL(ah.key,ah.secret,e);}else{ag=e;}N.ajax({url:ag,dataType:ae,success:((ah.success)?function(aj){ah.success(aj);}:function(){})});},yqlURL:function(ae){var e=ae.format;var ah=ae.query;if(!ah){throw new Error(F+'No query specified for method "yqlURL."');}var af=encodeURIComponent(ah.toLowerCase()),ag="http://query.yahooapis.com/v1/public/yql?q="+af+"&env=http://datatables.org/alltables.env&format="+e;return ag;},};N.yql=function(e){if(S[e]){return S[e].apply(this,Array.prototype.slice.call(arguments,1));}else{if(typeof e==="object"||!e){return S.query.apply(this,arguments);}else{N.error("Method "+e+" does not exist in jQuery.yql.");}}};})(jQuery);